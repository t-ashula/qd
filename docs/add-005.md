# 機能追加 5

## 拡張子の保存

- upload 時に適切な拡張子を取得しておいて episodes テーブルに保存する
- カラム名は ext
- メディアタイプと拡張子の取得方法は， 以下の通り
  1. python-magic ( libmagic ) による判定
  2. アップロード時のファイル名からの取得 ( mimetypes )
  3. わからなければデフォルトは media_type: audio/mpeg, ext: mp3 とする

### 留意事項

- libmagic への依存とインストールについて readme に追記
- `EpisodeService#_get_extension` は DB からの値で置き換えられるので削除
- alembic でのマイグレーションも作成
  - 既存のレコードの ext には， media_type から適切な値を生成して追加する
