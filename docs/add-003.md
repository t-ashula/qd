# 機能追加 3

## アップロード済チェック機能の追加

- `/upload` でファイルを受け取ったときに，
  - ファイルの sha256 ハッシュを計算
  - 同じハッシュ値のレコードがあったらアップロード済なので文字起こしなどの処理はせずに，既存レコードの id で `/episodes/:episode_id` にリダイレクト
  - なければ episodes テーブルの hash に保存して文字起こしなどの処理を続ける
- episodes テーブルに hash カラムを追加して，unique index を張る
- sqlalchemy のモデルも適切に変更する
- DB マイグレーションは alembic をつかうようにする
